# å®Œæ•´DB Schemaèˆ‡èªªæ˜

## ğŸ“Š ç³»çµ±æ¶æ§‹æ¦‚è¦½

### æ ¸å¿ƒæ¨¡çµ„
- **ç”¨æˆ¶ç®¡ç†**: ç”¨æˆ¶ã€è³£å®¶ã€æœƒå“¡ç­‰ç´šã€ç©åˆ†
- **å•†å“ç®¡ç†**: å•†å“ã€åˆ†é¡ã€è©•è«–
- **è¨‚å–®ç®¡ç†**: è¨‚å–®ã€è¨‚å–®æ˜ç´°ã€ä»˜æ¬¾ã€é€€è²¨
- **ç‰©æµå€‰å„²**: å€‰åº«ã€åº«å­˜ã€ä¾›æ‡‰å•†ã€é…é€
- **æ•¸æ“šåˆ†æ**: éŠ·å”®ã€åº«å­˜ã€ç‰©æµç¸¾æ•ˆåˆ†æ

## ğŸ—ƒï¸ æ ¸å¿ƒè³‡æ–™è¡¨

### ç”¨æˆ¶ç›¸é—œ (5å¼µè¡¨)
| è¡¨å | ä¸»è¦æ¬„ä½ | èªªæ˜ |
|------|---------|------|
| **users** | user_id, username, email | ç”¨æˆ¶åŸºæœ¬è³‡æ–™ |
| **sellers** | seller_id, user_id, store_name | è³£å®¶åº—èˆ–è³‡æ–™ |
| **membership_levels** | level_id, level_name, discount_rate | æœƒå“¡ç­‰ç´š |
| **points** | point_id, user_id, points_earned | ç©åˆ†è¨˜éŒ„ |
| **login_logs** | log_id, user_id, login_time | ç™»å…¥è¨˜éŒ„ |

### å•†å“ç›¸é—œ (3å¼µè¡¨)
| è¡¨å | ä¸»è¦æ¬„ä½ | èªªæ˜ |
|------|---------|------|
| **products** | product_id, product_name, price, seller_id | å•†å“è³‡æ–™ |
| **categories** | category_id, category_name | å•†å“åˆ†é¡ |
| **reviews** | review_id, product_id, user_id, rating | å•†å“è©•è«– |

### è¨‚å–®ç›¸é—œ (5å¼µè¡¨)
| è¡¨å | ä¸»è¦æ¬„ä½ | èªªæ˜ |
|------|---------|------|
| **orders** | order_id, customer_id, total_amount | è¨‚å–®ä¸»æª” |
| **order_items** | order_item_id, order_id, product_id | è¨‚å–®æ˜ç´° |
| **payments** | payment_id, order_id, amount | ä»˜æ¬¾è¨˜éŒ„ |
| **returns_refunds** | return_id, order_id, refund_amount | é€€è²¨é€€æ¬¾ |
| **coupons** | coupon_id, coupon_code, discount_amount | å„ªæƒ åˆ¸ |

### ç‰©æµç›¸é—œ (8å¼µè¡¨)
| è¡¨å | ä¸»è¦æ¬„ä½ | èªªæ˜ |
|------|---------|------|
| **warehouses** | warehouse_id, warehouse_name, capacity | å€‰åº«è³‡æ–™ |
| **inventory** | inventory_id, warehouse_id, product_id | åº«å­˜ç®¡ç† |
| **suppliers** | supplier_id, supplier_name, rating | ä¾›æ‡‰å•† |
| **shipments** | shipment_id, order_id, tracking_number | ç‰©æµé…é€ |

## âš™ï¸ æŠ€è¡“è¦æ ¼

### è³‡æ–™é¡å‹æ¨™æº–
```sql
-- IDæ¬„ä½çµ±ä¸€: INT UNSIGNED AUTO_INCREMENT
-- é‡‘é¡æ¬„ä½: DECIMAL(10,2) 
-- æ™‚é–“æ¬„ä½: TIMESTAMP
-- æ–‡å­—æ¬„ä½: VARCHAR(255) / TEXT
-- å¸ƒæ—æ¬„ä½: BOOLEAN
```

### é—œéµç´„æŸ
- **ä¸»éµ**: æ‰€æœ‰è¡¨éƒ½æœ‰è‡ªå¢ä¸»éµ
- **å¤–éµ**: åš´æ ¼åƒç…§å®Œæ•´æ€§
- **å”¯ä¸€éµ**: email, username, sku ç­‰
- **æª¢æŸ¥ç´„æŸ**: è©•åˆ† 1-5ã€æŠ˜æ‰£ç‡ 0-100

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### è³‡æ–™é©—è­‰
- **Emailæ ¼å¼é©—è­‰** + XSSé˜²è­·
- **å¯†ç¢¼é›œæ¹Š** (bcrypt)
- **è¼¸å…¥éæ¿¾** (HTML escape)
- **SQLæ³¨å…¥é˜²è­·**

### æ¥­å‹™é‚è¼¯ç´„æŸ
- ç™»å…¥å¤±æ•—æ¬¡æ•¸é™åˆ¶ (< 5æ¬¡)
- åº«å­˜æ•¸é‡ â‰¥ 0
- è¨‚å–®é‡‘é¡ > 0
- è©•åˆ†ç¯„åœ 1-5

## ğŸ“ˆ æ•ˆèƒ½è€ƒé‡

### ç´¢å¼•ç­–ç•¥
- ä¸»éµè‡ªå‹•ç´¢å¼•
- å¤–éµæ¬„ä½ç´¢å¼•
- æŸ¥è©¢ç†±é»æ¬„ä½ (email, sku, order_date)
- è¤‡åˆç´¢å¼• (user_id + created_at)

### è³‡æ–™åˆ†æè¡¨
- é å…ˆè¨ˆç®—çµ±è¨ˆè³‡æ–™
- æŒ‰æ—¥æœŸåˆ†å‰²å¤§å‹è¡¨
- å®šæœŸæ¸…ç†éæœŸè¨˜éŒ„

## ç¸½çµ

âœ… **21å¼µæ ¸å¿ƒè¡¨** æ¶µè“‹å®Œæ•´é›»å•†åŠŸèƒ½  
âœ… **çµ±ä¸€è³‡æ–™è¦ç¯„** ç¢ºä¿ä¸€è‡´æ€§  
âœ… **å®Œæ•´å®‰å…¨é˜²è­·** é˜²æ­¢å¸¸è¦‹æ”»æ“Š  
âœ… **é«˜æ•ˆèƒ½è¨­è¨ˆ** æ”¯æ´å¤§é‡ä½µç™¼